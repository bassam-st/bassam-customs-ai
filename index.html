<!doctype html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Ù…Ø³Ø§Ø¹Ø¯ Ø¨Ø³Ø§Ù… Ø§Ù„Ø¬Ù…Ø±ÙƒÙŠ</title>
<style>
body{font-family:system-ui;background:#f4f6f8;padding:16px}
.card{background:#fff;padding:16px;border-radius:16px;max-width:720px;margin:auto}
textarea,input{width:100%;padding:10px;margin:6px 0;font-size:16px}
button{padding:12px;border:0;border-radius:12px;font-size:16px;cursor:pointer}
.green{background:#16a34a;color:#fff}
.dark{background:#0f172a;color:#e5e7eb}
.admin{margin-top:20px;border-top:1px dashed #ccc;padding-top:12px}
.hidden{display:none}
</style>
</head>
<body>

<div class="card">
<h2>ğŸ›ƒ Ù…Ø³Ø§Ø¹Ø¯ Ø¨Ø³Ø§Ù… Ø§Ù„Ø¬Ù…Ø±ÙƒÙŠ</h2>

<textarea id="q" placeholder="Ù…Ø«Ø§Ù„: Ø¯Ø±Ø§Ø¬Ø§Øª Ø£Ø·ÙØ§Ù„ ÙƒÙ‡Ø±Ø¨Ø§Ø¦ÙŠØ© 300 Ø¯ÙˆÙ„Ø§Ø±"></textarea>
<button class="green" id="ask">Ø§Ø­Ø³Ø¨ / Ø§Ø³Ø£Ù„</button>
<pre id="out" class="dark">Ø¬Ø§Ù‡Ø²â€¦</pre>

<button onclick="showAdmin()">âš™ï¸ Ø¥Ø¯Ø§Ø±Ø©</button>

<div id="admin" class="admin hidden">
  <input id="pin" placeholder="PIN Ø§Ù„Ø¥Ø¯Ø§Ø±Ø©">
  <button onclick="login()">Ø¯Ø®ÙˆÙ„</button>

  <div id="panel" class="hidden">
    <h3>â• Ø¥Ø¶Ø§ÙØ© ØµÙ†Ù</h3>
    <input id="name" placeholder="Ø§Ø³Ù… Ø§Ù„ØµÙ†Ù">
    <input id="hs" placeholder="HS">
    <input id="keys" placeholder="Ù…Ø±Ø§Ø¯ÙØ§Øª (Ø§ÙØµÙ„ Ø¨ÙØ§ØµÙ„Ø©)">
    <input id="rate" placeholder="Ù†Ø³Ø¨Ø© Ø§Ù„Ø¬Ù…Ø§Ø±Ùƒ (Ù…Ø«Ø§Ù„ 0.05)">
    <button onclick="add()">Ø­ÙØ¸ Ø§Ù„ØµÙ†Ù</button>
  </div>
</div>
</div>

<script type="module">
import {answer,adminLogin,addItem,addRule} from "./engine/core.js";

const out = document.getElementById("out");

document.getElementById("ask").onclick = async ()=>{
  out.textContent = "Ø¬Ø§Ø±ÙŠ Ø§Ù„Ù…Ø¹Ø§Ù„Ø¬Ø©...";
  const r = await answer(q.value);
  out.textContent = r.text;
};

window.showAdmin = ()=>admin.classList.toggle("hidden");

window.login = ()=>{
  if(adminLogin(pin.value)){
    panel.classList.remove("hidden");
    pin.style.display="none";
  } else alert("PIN ØºÙŠØ± ØµØ­ÙŠØ­");
};

window.add = ()=>{
  addItem({
    name:name.value,
    hs:hs.value,
    keywords:keys.value.split(",")
  });
  addRule({
    hs:hs.value,
    type:"percent_of_value",
    rate:Number(rate.value)
  });
  alert("ØªÙ… Ø§Ù„Ø­ÙØ¸");
};
</script>

</body>
</html>
